# Requirements Document

## Introduction

This feature will create a new VSCode extension that adds export functionality for documentation generated by the Qoder VSCode fork. The extension will integrate with the existing Qoder API to retrieve wiki catalogs and content, then provide various export formats (Markdown files, HTML, PDF) for users to save their generated documentation locally or share it externally.

## Requirements

### Requirement 1

**User Story:** As a developer using Qoder, I want to export my generated repository documentation, so that I can share it with team members or archive it for future reference.

#### Acceptance Criteria

1. WHEN the user activates the extension THEN the system SHALL check for the presence of the Qoder extension ("aicoding.aicoding-agent")
2. IF the Qoder extension is not available THEN the system SHALL display an informative message and disable export functionality
3. WHEN the Qoder extension is available THEN the system SHALL register export commands in the command palette
4. WHEN the user has generated wiki documentation THEN the system SHALL be able to access the qoderApi.repoWiki methods

### Requirement 2

**User Story:** As a developer, I want to export individual wiki documents or entire wiki catalogs, so that I can choose the scope of my export based on my needs.

#### Acceptance Criteria

1. WHEN the user executes the export command THEN the system SHALL retrieve wiki catalogs using qoderApi.repoWiki.getWikiCatalogs()
2. WHEN wiki catalogs are available THEN the system SHALL present a selection interface for choosing documents to export
3. WHEN the user selects specific documents THEN the system SHALL retrieve content using qoderApi.repoWiki.getWikiContent(documentId)
4. WHEN the user chooses "Export All" THEN the system SHALL export the complete wiki catalog structure
5. IF a document has status "completed" THEN the system SHALL include it in export options
6. IF a document has status "failed" or is incomplete THEN the system SHALL exclude it from export or mark it clearly

### Requirement 3

**User Story:** As a developer, I want to export documentation as Markdown files, so that I can use the exported content in documentation systems, version control, and other markdown-compatible tools.

#### Acceptance Criteria

1. WHEN the user initiates export THEN the system SHALL export each document as a separate .md file preserving the original markdown content
2. WHEN exporting hierarchical content THEN the system SHALL preserve the folder structure from the wiki catalog
3. WHEN exporting THEN the system SHALL handle file links and cross-references appropriately for markdown format
4. WHEN exporting multiple documents THEN the system SHALL create an index.md file with navigation links to all exported documents
5. WHEN document names contain special characters THEN the system SHALL create valid filenames while preserving readability
6. WHEN exporting THEN the system SHALL maintain all markdown formatting including code blocks, tables, and lists

### Requirement 4

**User Story:** As a developer, I want to choose where to save my exported documentation, so that I can organize it according to my project structure.

#### Acceptance Criteria

1. WHEN the user starts an export THEN the system SHALL prompt for a destination folder using VSCode's folder picker
2. WHEN a destination is selected THEN the system SHALL create the necessary directory structure
3. WHEN exporting multiple documents THEN the system SHALL organize files in folders matching the wiki catalog hierarchy
4. WHEN files already exist in the destination THEN the system SHALL prompt the user for overwrite confirmation
5. WHEN export is complete THEN the system SHALL show a success notification with the export location
6. WHEN export fails THEN the system SHALL display clear error messages with actionable information

### Requirement 5

**User Story:** As a developer, I want to see export progress for large documentation sets, so that I know the operation is proceeding and can estimate completion time.

#### Acceptance Criteria

1. WHEN exporting multiple documents THEN the system SHALL display a progress indicator
2. WHEN processing each document THEN the system SHALL update progress with current document name
3. WHEN export encounters errors THEN the system SHALL continue with remaining documents and report errors at the end
4. WHEN export is cancelled THEN the system SHALL stop processing and clean up partial exports
5. WHEN export completes THEN the system SHALL provide a summary of successful and failed exports

### Requirement 6

**User Story:** As a developer, I want the export functionality to handle authentication and API errors gracefully, so that I get clear feedback when issues occur.

#### Acceptance Criteria

1. WHEN the qoderApi.auth.isLogin() returns false THEN the system SHALL prompt the user to log in to Qoder
2. WHEN API calls fail due to network issues THEN the system SHALL display appropriate error messages and retry options
3. WHEN wiki content is not available THEN the system SHALL skip unavailable documents and continue with available ones
4. WHEN the system encounters rate limiting THEN the system SHALL implement appropriate delays and retry logic
5. WHEN authentication expires during export THEN the system SHALL handle re-authentication gracefully